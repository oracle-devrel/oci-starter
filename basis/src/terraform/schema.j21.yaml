title: "OCI Starter: From Resource Manager {{ prefix }} "
stackDescription: "Resource Manager stack created by OCI Starter " 
description: "Stack will deploy the component used in the OCI Starter project" 
schemaVersion: 1.1.0
version: "20221004"
locale: "en"

#################
# Variable Groups
#################
variableGroups:

- title: Starter Project
  visible: true  
  variables:
{%- for param in to_fill_params %}
  - {{ param }}
{%- endfor %}
  - show_optional

- title: Fixed
  visible: ${show_optional}
  variables:
{%- for param in fixed_params %}
  - {{ param }}
{%- endfor %}

- title: Optional
  visible: ${show_optional}  
  variables:
{%- for param in terraform_variables %}
{%- if ( param not in to_fill_params and param not in fixed_params ) %}
  - {{ param }}
{%- endif %}
{%- endfor %}

#################
# Output Groups
#################

######################
# Variable Definitions
######################

variables:
# Env Params
{%- for param in terraform_variables %}
  {{ param }}:
    {%- if param in ["compartment_ocid", "lz_app_cmp_ocid", "lz_db_cmp_ocid", "lz_network_cmp_ocid", "lz_security_cmp_ocid", "lz_serv_cmp_ocid", "lz_web_cmp_ocid"] %}
    type: oci:identity:compartment:id
    {%- elif param in ["db_password"] %}
    type: password
    confirmation: true
    {%- elif param in allowed_values %}
    type: enum
    enum:
    {%- for value in allowed_values[param] %}
      - {{ value }}
    {%- endfor %}
    {%- elif param=="ssh_public_key" %}
    type: oci:core:ssh:publickey
    {%- elif param=="region" %}
    type: oci:identity:region:name
    {%- else %}    
    type: string
    {%- endif %}
    {%- if param in title %}
    title: {{ title[param] }}
    {%- else %}
    title: {{ param }}
    {%- endif %}
    {%- if param in comments %}
    description: "{{ comments[param][0] }}"
    {%- endif %}
    {%- if param in to_fill_params %}
    required: true
    {%- else %}
    required: false
    {%- endif %}
{%- endfor %}
  show_optional:
    type: boolean
    title: Advanced
    description: Show Advanced Parameters
    default: false
